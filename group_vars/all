group_vars:
  openstack:

    images:
      - name: cirros-0.5.2
        download_url: "http://download.cirros-cloud.net/0.5.2/cirros-0.5.2-x86_64-disk.img"
        cpu_arch: "x86_64"
        distro: "cirros"
      - name: ubuntu-22.04
        download_url: "https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img"
        cpu_arch: "x86_64"
        distro: "ubuntu"
    servers:
      - name: vm1
        image: cirros-0.5.2
        # A variable 'ssh_public_key_pair_name' is optional.
        # A server will be created containing with ssh public key pair if you declared it.
        ssh_public_key_pair_name: default

        flavor: m1.tiny
        auth_ref: "default"
        timeout: 300
        nics:
          - net-name: private_net
        security_groups:
          - permit_all

      - name: vm2
        image: ubuntu-22.04
        ssh_public_key_pair_name: default
        flavor: m1.medium
        auth_ref: "default"
        timeout: 300
        nics:
          - net-name: private_net
        security_groups:
          - permit_all

    # Auth environment variables that will be used command for OpenStack
    auth:
      # Parameters of auth in environment variables
      env:
        OS_USERNAME: openstack_operator
        OS_PASSWORD: secret
        OS_PROJECT_NAME: default_project
        OS_USER_DOMAIN_NAME: Default
        OS_PROJECT_DOMAIN_NAME: Default
        OS_AUTH_URL: "http://dev-controller01:5000"
        OS_IDENTITY_API_VERSION: 3

    security_groups:
      - name: permit_all
        projects:
          - default_project
        description: "Permit all packets"
        rules:
          # You can omit the name of the security group that these rules will be added.
          #
          # Permit all tcp rules.
          - protocol: tcp
            port_range_min: 1
            port_range_max: 65535
            remote_ip_prefix: 0.0.0.0/0
          # Permit ICMP
          - protocol: icmp
            port_range_min: -1
            port_range_max: -1
            remote_ip_prefix: 0.0.0.0/0

    flavors:
      - name: "m1.tiny"
        ram: 512
        vcpus: 1
        disk: 2
      - name: "m1.medium"
        ram: 2048
        vcpus: 2
        disk: 8

    rbacs:
      - object_type: "network"                # Type of object that RBAC will be applied. OpenStack supports "address_group", "address_scope", "security_group", "subnetpool", "qos_policy" or "network". But this Ansible only supports "network" so far.
        object_id: "private_net"              # Object ID that RBAC will be applied. You should choose network name if you specified "network" as type for example.
        domain: "default"                     # Domain name that the target in.
        project_id: "default_project"         # Name of project that the domain and object_id in.
        target_project_id: "default_project"  # The project to which access to be allowed or revoked/disallowed.
        action: "access_as_shared"            # Name of action. You can choose "access_as_shared" or "access_as_external". You should choose "access_as_shared" if you specified an object (type: "network" and choosen internal network for example) in internal. Or you should choose "access_as_external" for others.

    ssh_public_keys:
      default:
        value: "ssh-ed25519 xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx tsutomu@arch"
